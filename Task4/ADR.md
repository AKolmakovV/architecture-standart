### **Название задачи: Концептуальная архитектура открытия депозитов для MVP**

### **Автор: Колмаков А.В.**

### **Дата: 13.09.2025**

### **Функциональные требования**


| **№** | **Действующие лица или системы**                                                                                                                                                                                                                 | **Use Case**                                                      | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| :------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  UC1  | Оператор кол-центра(внутреннего или внешнего), Клиент, Кол-центр, Сервис работы с депозитами, S3 Хранилище файлов, Система партнерского кол-центра | Звонок - обращение за консультацией | 1. Клиент звонит в службу поддержки банка 2.Звонок принимает либо оператор внешнего кол-центра, либо оператор кол-центра банка 3.1 В случае если консультацию оказывает оператор кол-центра банка, он получает информаци о ставках из виджета - клиента кол-центра 3.2 Оператор внешнего кол центра получает ставки, скачивая файл из файл-сервера банка и оказывает необходимые консультации |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

Опишите здесь нефункциональные требования и архитектурно значимые требования.


| **№** | **Требование**                                                                                                                                                                                                                                                                                                                                                 |
| :------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   R1   | Кол-центру партнеров требуется получать текущие ставки. Нет возможности делать вызовы API банковских сервисов, например через SFTP протокол. При этом, кол-центр готов получать ставки ввиде Excel файлов. |

### <a name="_qmphm5d6rvi3"></a>**Решение**

- Диаграмма контекста: [C4 Диаграмма контекстов](./context_c4_diagram.puml)
- Диаграмма контейнеров: [С4 Диаграмма контейнеров](./container_c4_diagram.puml)

Сервис депозитов должен генерировать события по факту изменения ставок, сервисы, которым необходимы актуальные ставки должны подписаться на данный топик. В нашем случае кол-центр, хоть и партнерская система, но в нее можно вносить изменения и как сказано в задании - она находится в инфраструктуре банка, а значит мы можем сделать интеграцию.

Подобным образом на актуальные ставки подписывается сайт\веб приложение - но так как это не предмет рассмотрения, они не отображены на схеме.

Система партнерского кол-центра, это внешняя по отношению к банку и его инфраструктуре система, они не могут вызывать сервисы или подписываться на события в Kafka, но им нужна информация по текущим ставкам, при этом, они готовы получать Excel документ с ними. В качестве решения этой проблемы мы научим генерировать Excel документ наш сервис работы с депозитами на каждое изменение ставок, и положим его в S3 хранилище файлов. Подрядчикам предоставим доступ на скачивание.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**

Альтернативные варианты:

1. Мы можем не разворачивать S3 сервис, и не генерировать файлы, вместо этого мы можем предоставить учетные записи всем подрядчикам в наш интернет банк или сайт, где они смогут получать данные по актуальным ставкам - более того мы можем расширить интерфейс интернет банка для данного типа ролей.
2. Либо мы можем обойтись без S3 хранилища, а например выполнять отправку email на почту подрядчика вместе с файлом ставок.

**Недостатки, ограничения, риски**

1. Файл может не сгенерироваться, или сотрудники могут запутаться в файлах, по этому нужны понятные имена и структура хранилища
2. Хранилище может быть недоступно по какой либо причине, либо файл может перестать обновляться. О проблемах нам должна рассказать система мониторинга описанная в Task3
